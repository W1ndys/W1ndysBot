# EasyQFNUGroupManager 群管理模块

EasyQFNU群管理工具，用于入群验证管理。当新用户入群后需要在指定时间内通过管理员验证，否则将被自动移出群聊。

## 功能特性

1. **入群检测**：检测到用户入群后，自动艾特该用户并发送欢迎消息
2. **入群记录**：记录用户的入群时间、QQ号、群号和验证状态
3. **管理员验证**：管理员可通过发送"通过+QQ号"或"通过+艾特"来验证用户
4. **超时踢出**：每次心跳检测未验证用户，超过3小时未验证将被通告并踢出
5. **合并通告**：同一群内的所有未验证用户合并到一条消息内艾特，避免风控

## 使用方法

### 开启/关闭模块
- 发送 `eqgm` 即可切换模块开关状态（需要系统管理员权限）

### 查看菜单
- 发送 `eqgm菜单` 查看模块命令帮助

### 验证用户（需要群管理员权限）
- `通过123456` - 验证QQ号为123456的用户通过
- `通过@用户` - 验证被艾特的用户通过

## 配置说明

在 `__init__.py` 中可以修改以下配置：

- `TIMEOUT_HOURS`: 验证超时时间，默认3小时
- `VERIFY_COMMAND`: 验证命令前缀，默认"通过"
- `KICK_NOTICE_MESSAGE`: 踢出通告消息内容

在 `handlers/handle_notice_group.py` 中可以修改：

- `WELCOME_MESSAGE`: 欢迎消息内容

## 数据库说明

使用SQLite数据库存储用户验证信息，数据文件位于 `data/EasyQFNUGroupManager/EasyQFNUGroupManager.db`

表结构：
- `id`: 主键
- `user_id`: QQ号
- `group_id`: 群号
- `join_time`: 入群时间戳
- `verified`: 验证状态（0=未验证，1=已验证）
- `verify_time`: 验证时间戳
- `notified`: 是否已通知踢出（0=否，1=是）

## 注意事项

1. 模块需要机器人具有群管理员权限才能执行踢人操作
2. 验证命令仅群管理员和系统管理员可使用
3. 用户被踢后不会被拉黑，可以重新申请加群
