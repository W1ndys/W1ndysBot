# QFNUMonitor - 曲阜师范大学通知公告监控模块

曲阜师范大学教务处通知公告监控模块，实现自动监控和智能摘要功能。

## 功能特性

1. **定期检查公告**：每次心跳自动检查教务处官网公告页面，获取最新公告信息
2. **新公告推送**：检测到新公告时，自动推送到所有启用的群聊
3. **智能摘要**：使用硅基流动大模型 API 生成公告内容的智能摘要
4. **链接识别**：识别群消息中的 qfnu.edu.cn 链接，自动回复智能摘要
5. **摘要缓存**：缓存已生成的摘要，避免重复调用 API

## 使用方式

### 开关模块

在群聊中发送 `qfnum` 切换模块开关（仅管理员可操作）

### 查看菜单

发送 `qfnum菜单` 查看模块命令列表

## 环境变量配置

在 `.env` 文件中添加以下配置：

```env
# 硅基流动 API 密钥（用于生成智能摘要）
SILICONFLOW_API_KEY=your_api_key_here
```

如果未配置 API 密钥，模块将使用原始公告摘要，不会生成智能摘要。

## 数据存储

模块数据存储在 `data/QFNUMonitor/` 目录下：

- `QFNUMonitor.db`: SQLite 数据库，存储已通知的公告和摘要缓存

## 推送消息格式

### 新公告推送

```
📢 曲阜师范大学教务处新公告

📌 公告标题
📅 发布日期: 2025-01-01

📝 智能摘要:
摘要内容...

🔗 详情链接: https://jwc.qfnu.edu.cn/info/...
```

### 链接摘要回复

```
🤖 智能摘要

📝 摘要内容...

🔗 https://jwc.qfnu.edu.cn/info/...
```

## 监控的网站

- 教务处通知公告：https://jwc.qfnu.edu.cn/tz_j_.htm

## 技术说明

- 使用 `httpx` 进行 HTTP 请求
- 使用 `BeautifulSoup` 解析 HTML
- 使用 SQLite 存储数据
- 使用硅基流动 API (Qwen2.5-7B-Instruct 模型) 生成摘要
